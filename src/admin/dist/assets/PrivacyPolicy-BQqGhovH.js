import{b as f,r as n,j as a,L as m}from"./index-CqDVZS1y.js";import{J as v}from"./jodit.min-BT6cXF0j.js";import{P as g}from"./PageHeading-Vr-Yfc9L.js";import{S as d}from"./sweetalert2.esm.all-DV3w3JmD.js";import"./AntdIcon-D531oBFH.js";const h=f.injectEndpoints({endpoints:o=>({getPrivacy:o.query({query:()=>({url:"manage/get-privacy-policy",method:"GET"}),providesTags:["privacy"]}),createPrivacy:o.mutation({query:({description:s})=>({url:"manage/add-privacy-policy",method:"POST",body:{description:s}}),invalidatesTags:["privacy"]})})}),{useGetPrivacyQuery:x,useCreatePrivacyMutation:P}=h;function E(){const o=n.useRef(null),[s,c]=n.useState(""),{data:t,isLoading:l}=x(),[p,{isLoading:r}]=P();n.useEffect(()=>{var e;const i=((e=t==null?void 0:t.data)==null?void 0:e.description)||(t==null?void 0:t.description)||"";i&&c(i)},[t]);const u=async()=>{var i;try{await p({description:s}).unwrap(),await d.fire({icon:"success",title:"Privacy policy saved",toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,timerProgressBar:!0,background:"#111827",color:"#ffffff",iconColor:"#10B981"})}catch(e){const y=((i=e==null?void 0:e.data)==null?void 0:i.message)||(e==null?void 0:e.error)||"Failed to save";await d.fire({icon:"error",title:y,confirmButtonColor:"#F9B038"})}};return l?a.jsx(m,{}):a.jsxs("div",{className:"p-5 space-y-10 min-h-screen",children:[a.jsx(g,{title:"Privacy Policy"}),a.jsx("div",{className:"bg-white rounded shadow p-5 h-full",children:a.jsx(v,{ref:o,value:s,config:{readonly:!1,height:400},onChange:i=>c(i)})}),a.jsx("div",{className:"text-center py-5",children:a.jsx("button",{onClick:u,disabled:r,className:`bg-[#0b7bb3] text-white font-bold w-full py-2 rounded transition duration-200 ${r?"opacity-70 cursor-not-allowed":""}`,children:r?"Saving...":"Save changes"})})]})}export{E as default};
