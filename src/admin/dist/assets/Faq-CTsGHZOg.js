import{r as c,b as C,j as e,L as S}from"./index-CqDVZS1y.js";import{P as B}from"./PageHeading-Vr-Yfc9L.js";import{S as b}from"./sweetalert2.esm.all-DV3w3JmD.js";import{M as y}from"./index-BYWIJUt8.js";import{R as O}from"./QuestionCircleOutlined-DvZdaDzd.js";import{R as L}from"./DownOutlined-CfxgNlEp.js";import{I as q,_ as E}from"./AntdIcon-D531oBFH.js";var D={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"},R=function(s,o){return c.createElement(q,E({},s,{ref:o,icon:D}))},T=c.forwardRef(R),I={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"},P=function(s,o){return c.createElement(q,E({},s,{ref:o,icon:I}))},$=c.forwardRef(P);const z=C.injectEndpoints({endpoints:n=>({getAllFaq:n.query({query:s=>({url:"manage/get-faq",method:"GET",params:s}),providesTags:["faq"]}),createFaq:n.mutation({query:s=>({url:"manage/add-faq",method:"POST",body:s}),invalidatesTags:["faq"]}),updateFaq:n.mutation({query:s=>({url:"manage/update-faq",method:"PATCH",body:s}),invalidatesTags:["faq"]}),deleteFaq:n.mutation({query:s=>({url:"manage/delete-faq",method:"DELETE",params:{faqId:s}}),invalidatesTags:["faq"]})})}),{useGetAllFaqQuery:H,useCreateFaqMutation:_,useUpdateFaqMutation:G,useDeleteFaqMutation:U}=z;function Y({open:n,onCancel:s,faqId:o,onDeleted:r}){const[i,{isLoading:u}]=U(),h=async()=>{var d;if(o)try{await i(o).unwrap(),await b.fire({icon:"success",title:"FAQ deleted",toast:!0,position:"top-end",showConfirmButton:!1,timer:1200,timerProgressBar:!0,background:"#111827",color:"#ffffff",iconColor:"#10B981"}),s==null||s(),r==null||r()}catch(a){const x=((d=a==null?void 0:a.data)==null?void 0:d.message)||(a==null?void 0:a.error)||"Failed to delete FAQ";await b.fire({icon:"error",title:x,confirmButtonColor:"#0b7bb3"})}};return e.jsx(y,{open:n,centered:!0,onCancel:s,footer:null,children:e.jsxs("div",{className:"p-5",children:[e.jsx("h1",{className:"text-4xl text-center text-[#0D0D0D]",children:"Are you sure you want to delete ?"}),e.jsx("div",{className:"text-center py-5",children:e.jsx("button",{onClick:h,disabled:u,className:`bg-[#0b7bb3] text-white font-semibold w-full py-2 rounded transition duration-200 ${u?"opacity-70 cursor-not-allowed":""}`,children:u?"Deleting...":"YES,DELETE"})}),e.jsx("div",{className:"text-center pb-5",children:e.jsx("button",{onClick:s,className:"text-[#0b7bb3] border-2 border-[#0b7bb3] bg-white font-semibold w-full py-2 rounded transition duration-200",children:"NO,DONâ€™T DELETE"})})]})})}function J({open:n,onCancel:s,question:o,answer:r,onChangeQuestion:i,onChangeAnswer:u,onCreated:h}){const[d,{isLoading:a}]=_(),x=async()=>{var f;if(!(o!=null&&o.trim())||!(r!=null&&r.trim())){await b.fire({icon:"error",title:"Missing fields",text:"Please provide both question and answer.",confirmButtonColor:"#0b7bb3"});return}try{await d({question:o.trim(),description:r.trim()}).unwrap(),await b.fire({icon:"success",title:"FAQ added",toast:!0,position:"top-end",showConfirmButton:!1,timer:1200,timerProgressBar:!0,background:"#111827",color:"#ffffff",iconColor:"#10B981"}),h==null||h(),s==null||s()}catch(l){const m=((f=l==null?void 0:l.data)==null?void 0:f.message)||(l==null?void 0:l.error)||"Failed to add FAQ";await b.fire({icon:"error",title:m,confirmButtonColor:"#0b7bb3"})}};return e.jsx(y,{open:n,centered:!0,onCancel:s,footer:null,children:e.jsxs("div",{className:"p-5",children:[e.jsx("h2",{className:"text-2xl font-bold text-center mb-2",children:"Add FAQ"}),e.jsx("p",{className:"text-center mb-6 text-gray-700",children:"Fill out the details below to add a new FAQ. Ensure the answer provides clarity and helps users quickly resolve their queries."}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"question",className:"block text-sm font-medium mb-1",children:"Question for the FAQ"}),e.jsx("input",{id:"question",type:"text",placeholder:"Enter the FAQ",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",value:o,onChange:i})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"answer",className:"block text-sm font-medium mb-1",children:"Answer to the FAQ"}),e.jsx("textarea",{id:"answer",placeholder:"Enter the FAQ Answer",rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",value:r,onChange:u})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-6",children:[e.jsx("button",{onClick:s,className:"py-2 px-4 rounded-lg border border-[#EF4444] bg-red-50",children:"Cancel"}),e.jsx("button",{onClick:x,disabled:a,className:`py-2 px-4 rounded-lg bg-[#0b7bb3] text-white ${a?"opacity-70 cursor-not-allowed":""}`,children:a?"Saving...":"Save"})]})]})})}function K({open:n,onCancel:s,faqId:o,question:r,answer:i,onChangeQuestion:u,onChangeAnswer:h,onUpdated:d}){const[a,{isLoading:x}]=G(),f=async()=>{var l;if(o){if(!(r!=null&&r.trim())||!(i!=null&&i.trim())){await b.fire({icon:"error",title:"Missing fields",text:"Please provide both question and answer.",confirmButtonColor:"#0b7bb3"});return}try{await a({faqId:o,question:r.trim(),description:i.trim()}).unwrap(),await b.fire({icon:"success",title:"FAQ updated",toast:!0,position:"top-end",showConfirmButton:!1,timer:1200,timerProgressBar:!0,background:"#111827",color:"#ffffff",iconColor:"#10B981"}),d==null||d(),s==null||s()}catch(m){const w=((l=m==null?void 0:m.data)==null?void 0:l.message)||(m==null?void 0:m.error)||"Failed to update FAQ";await b.fire({icon:"error",title:w,confirmButtonColor:"#0b7bb3"})}}};return e.jsx(y,{open:n,centered:!0,onCancel:s,footer:null,children:e.jsxs("div",{className:"p-5",children:[e.jsx("h2",{className:"text-2xl font-bold text-center mb-2",children:"Update FAQ"}),e.jsx("p",{className:"text-center mb-6 text-gray-700",children:"Fill out the details below to add a new FAQ. Ensure the answer provides clarity and helps users quickly resolve their queries."}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"question",className:"block text-sm font-medium mb-1",children:"Question for the FAQ"}),e.jsx("input",{id:"question",type:"text",placeholder:"Enter the FAQ",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none",value:r,onChange:u})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"answer",className:"block text-sm font-medium mb-1",children:"Answer to the FAQ"}),e.jsx("textarea",{id:"answer",placeholder:"Enter the FAQ Answer",rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",value:i,onChange:h})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-6",children:[e.jsx("button",{onClick:s,className:"py-2 px-4 rounded-lg border border-[#EF4444] bg-red-50",children:"Cancel"}),e.jsx("button",{className:"py-2 px-4 rounded-lg bg-[#0b7bb3] text-white",onClick:f,disabled:x,children:x?"Saving...":"Save"})]})]})})}function ae(){const[n,s]=c.useState(0),[o,r]=c.useState(!1),[i,u]=c.useState(!1),[h,d]=c.useState(!1),{data:a,isLoading:x}=H(),l=((a==null?void 0:a.data)||(a==null?void 0:a.faqs)||[]).map(t=>({key:(t==null?void 0:t._id)||(t==null?void 0:t.id),title:(t==null?void 0:t.question)||(t==null?void 0:t.title)||"Untitled",description:(t==null?void 0:t.answer)||(t==null?void 0:t.description)||""})),m=t=>{s(p=>p===t?null:t)},w=t=>{g((t==null?void 0:t.key)||null),v((t==null?void 0:t.title)||""),j((t==null?void 0:t.description)||""),d(!0)},Q=()=>{u(!1)},k=()=>{d(!1)},M=()=>{u(!0)},[F,v]=c.useState(""),[N,j]=c.useState(""),[A,g]=c.useState(null);return x?e.jsx(S,{}):e.jsxs("div",{className:"relative p-5 z-0 space-y-10 min-h-screen",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(B,{title:"FAQ"}),e.jsx("div",{className:"text-white",children:e.jsx("button",{onClick:M,className:"bg-[#F9B038] text-white font-bold px-5 py-2 rounded transition duration-200",children:"+ Add FAQ"})})]}),e.jsx("div",{className:"flex gap-2 flex-col w-full mt-5 bg-white p-5",children:l==null?void 0:l.map((t,p)=>e.jsxs("section",{className:"border-b border-[#e5eaf2] rounded py-3",children:[e.jsxs("div",{className:"flex gap-2 cursor-pointer items-center justify-between w-full",children:[e.jsxs("h2",{className:"text-base font-normal md:font-bold md:text-2xl flex gap-2 items-center",children:[e.jsx(O,{className:"w-5 h-5 hidden md:flex"}),t.title]}),e.jsxs("div",{className:"flex gap-2 md:gap-4 items-center",children:[e.jsx(L,{onClick:()=>m(p),className:`w-5 h-5 text-[#0D0D0D] transition-all duration-300 ${n===p&&"rotate-[180deg] !text-[#0b7bb3]"}`}),e.jsx("div",{className:"border-2 px-1.5 py-1 rounded border-[#0b7bb3] bg-[#f0fcf4]",children:e.jsx("button",{className:"",onClick:()=>w(t),children:e.jsx($,{className:"text-2xl cursor-pointer text-[#0b7bb3] font-bold transition-all"})})}),e.jsx("div",{className:"border-2 px-1.5 py-1 rounded border-[#0b7bb3] bg-[#f0fcf4]",children:e.jsx("button",{className:"",onClick:()=>{g(t.key),r(!0)},children:e.jsx(T,{className:"text-2xl cursor-pointer text-red-500 transition-all"})})})]})]}),e.jsx("div",{className:`grid transition-all duration-300 overflow-hidden ease-in-out ${n===p?"grid-rows-[1fr] opacity-100 mt-4":"grid-rows-[0fr] opacity-0"}`,children:e.jsx("p",{className:"text-[#424242] text-[0.9rem] overflow-hidden",children:t.description})})]},p))}),e.jsx(Y,{open:o,onCancel:()=>{r(!1),g(null)},faqId:A,onDeleted:()=>{g(null)}}),e.jsx(J,{open:i,onCancel:Q,question:F,answer:N,onChangeQuestion:t=>v(t.target.value),onChangeAnswer:t=>j(t.target.value),onCreated:()=>{v(""),j("")}}),e.jsx(K,{open:h,onCancel:k,faqId:A,question:F,answer:N,onChangeQuestion:t=>v(t.target.value),onChangeAnswer:t=>j(t.target.value),onUpdated:()=>{g(null)}})]})}export{ae as default};
