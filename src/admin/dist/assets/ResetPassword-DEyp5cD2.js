import{r as l,u as v,a as N,j as s,L as P}from"./index-CqDVZS1y.js";import{a as C}from"./authApi-vzOJaqpO.js";import{S as i}from"./sweetalert2.esm.all-DV3w3JmD.js";import{R as u}from"./EyeInvisibleOutlined-D0lEZT0X.js";import{R as f}from"./EyeOutlined-DM8ppxuI.js";import"./AntdIcon-D531oBFH.js";function q(){var d;const[t,x]=l.useState(!1),[a,w]=l.useState(""),[o,p]=l.useState(""),h=(d=v().state)==null?void 0:d.email,[g,{isLoading:n}]=C(),b=N(),c=()=>{x(!t)},j=async r=>{var m;if(r.preventDefault(),!a||!o){await i.fire({icon:"error",title:"Missing fields",text:"Please enter and confirm your new password.",confirmButtonColor:"#27E2F5"});return}if(a!==o){await i.fire({icon:"error",title:"Passwords do not match",text:"New password and confirm password must be the same.",confirmButtonColor:"#27E2F5"});return}try{await g({email:h,newPassword:a,confirmPassword:o}).unwrap(),await i.fire({icon:"success",title:"Password reset",text:"Your password has been reset successfully.",toast:!0,position:"top-end",showConfirmButton:!1,timer:1800,timerProgressBar:!0,background:"#111827",color:"#ffffff",iconColor:"#10B981"}),b("/login")}catch(e){const y=((m=e==null?void 0:e.data)==null?void 0:m.message)||(e==null?void 0:e.error)||"Failed to reset password";i.fire({icon:"error",title:"Password reset failed",text:y,confirmButtonColor:"#27E2F5"})}};return n?s.jsx(P,{}):s.jsxs("div",{className:"min-h-screen container mx-auto",children:[s.jsx("div",{children:s.jsx("img",{src:"/logo.png",alt:"log in image",width:200,height:200})}),s.jsxs("div",{className:" flex items-center justify-center",children:[s.jsx("div",{className:"flex-1 flex flex-col justify-center px-8 py-12 lg:px-16 bg-white",children:s.jsxs("div",{className:"container w-full mx-auto",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-[#313131] mb-2",children:"Set a password"}),s.jsx("p",{className:"text-[#313131]",children:"Your previous password has been reseted. Please set a new password for your account."})]}),s.jsxs("form",{onSubmit:j,className:"space-y-5",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{id:"newPassword",type:t?"text":"password",value:a,onChange:r=>w(r.target.value),className:"w-full px-4 py-3 pr-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-all duration-200 outline-none",placeholder:"••••••••••••••••••••••••",required:!0}),s.jsx("button",{type:"button",onClick:c,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 transition-colors",children:t?s.jsx(u,{className:"w-5 h-5"}):s.jsx(f,{className:"w-5 h-5"})})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{id:"confirmPassword",type:t?"text":"password",value:o,onChange:r=>p(r.target.value),className:"w-full px-4 py-3 pr-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-all duration-200 outline-none",placeholder:"••••••••••••••••••••••••",required:!0}),s.jsx("button",{type:"button",onClick:c,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 transition-colors",children:t?s.jsx(u,{className:"w-5 h-5"}):s.jsx(f,{className:"w-5 h-5"})})]})]}),s.jsx("button",{type:"submit",disabled:n,className:`w-full bg-[#27E2F5] text-white py-3 px-4 rounded-lg font-medium ${n?"opacity-70 cursor-not-allowed":""}`,children:n?"Setting...":"Set password"})]})]})}),s.jsx("div",{className:"hidden lg:flex flex-1 relative",children:s.jsx("div",{className:"w-full bg-cover bg-center bg-no-repeat",children:s.jsx("img",{src:"/reset.png",alt:"reset password image"})})})]})]})}export{q as default};
