import{u as g,r as h,a as p,j as e,L as j}from"./index-CqDVZS1y.js";import{u as w}from"./authApi-vzOJaqpO.js";import{S as n}from"./sweetalert2.esm.all-DV3w3JmD.js";function C(){var l;const r=(l=g().state)==null?void 0:l.email,[i,d]=h.useState(new Array(6).fill("")),[f,{isLoading:a}]=w(),c=p(),m=(o,s)=>{if(!isNaN(o)){const t=[...i];t[s]=o,d(t),o&&s<5&&document.getElementById(`code-${s+1}`).focus()}},x=async()=>{var s;const o=i.join("");if(!r)return await n.fire({icon:"error",title:"Missing email",text:"Please start from Forgot Password again.",confirmButtonColor:"#27E2F5"}),c("/forget-password");if(o.length===6)try{await f({email:r,code:o}).unwrap(),await n.fire({icon:"success",title:"Code verified",text:"You can now reset your password.",toast:!0,position:"top-end",showConfirmButton:!1,timer:1800,timerProgressBar:!0,background:"#111827",color:"#ffffff",iconColor:"#10B981"}),c("/reset-password",{state:{email:r}})}catch(t){const u=((s=t==null?void 0:t.data)==null?void 0:s.message)||(t==null?void 0:t.error)||"Invalid or expired code";n.fire({icon:"error",title:"Verification failed",text:u,confirmButtonColor:"#27E2F5"})}};return a?e.jsx(j,{}):e.jsxs("div",{className:"min-h-screen container mx-auto",children:[e.jsx("div",{children:e.jsx("img",{src:"/logo.png",alt:"log in image",width:200,height:200})}),e.jsxs("div",{className:" flex items-center justify-center",children:[e.jsx("div",{className:"flex-1 flex flex-col justify-center px-8 py-12 lg:px-16 bg-white",children:e.jsxs("div",{className:"container w-full mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-[#313131] mb-2",children:"Verify code"}),e.jsx("p",{className:"text-[#313131]",children:"An authentication code has been sent to your email."})]}),e.jsxs("form",{className:"space-y-5",children:[e.jsx("div",{className:"flex justify-center gap-2",children:i.map((o,s)=>e.jsx("input",{id:`code-${s}`,type:"text",maxLength:"1",value:o,onChange:t=>m(t.target.value,s),className:"shadow-xs w-12 h-12 text-2xl text-center border border-[#0b7bb3] text-[#0b7bb3] rounded-lg focus:outline-none"},s))}),e.jsx("div",{className:"flex flex-col gap-5 justify-center items-center text-white",children:e.jsx("button",{onClick:x,type:"button",disabled:a||i.join("").length!==6,className:`whitespace-nowrap w-full bg-[#27E2F5] text-white font-semibold py-3 rounded-lg shadow-lg my-5 ${a||i.join("").length!==6?"opacity-70 cursor-not-allowed":"cursor-pointer"}`,children:a?"Verifying...":"Verify"})})]})]})}),e.jsx("div",{className:"hidden lg:flex flex-1 relative",children:e.jsx("div",{className:"w-full bg-cover bg-center bg-no-repeat",children:e.jsx("img",{src:"/verify.png",alt:"verification  image"})})})]})]})}export{C as default};
