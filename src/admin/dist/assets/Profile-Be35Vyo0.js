import{r as a,j as e,L as E}from"./index-CqDVZS1y.js";import{u as C,a as D,R as z,b as A}from"./profileApi-7qzShNrw.js";import{S as p}from"./sweetalert2.esm.all-DV3w3JmD.js";import{I as j,_ as N}from"./AntdIcon-D531oBFH.js";import{R as P}from"./EyeInvisibleOutlined-D0lEZT0X.js";import{R as y}from"./EyeOutlined-DM8ppxuI.js";import{P as B}from"./PageHeading-Vr-Yfc9L.js";var R={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 248H728l-32.4-90.8a32.07 32.07 0 00-30.2-21.2H358.6c-13.5 0-25.6 8.5-30.1 21.2L296 248H160c-44.2 0-80 35.8-80 80v456c0 44.2 35.8 80 80 80h704c44.2 0 80-35.8 80-80V328c0-44.2-35.8-80-80-80zm8 536c0 4.4-3.6 8-8 8H160c-4.4 0-8-3.6-8-8V328c0-4.4 3.6-8 8-8h186.7l17.1-47.8 22.9-64.2h250.5l22.9 64.2 17.1 47.8H864c4.4 0 8 3.6 8 8v456zM512 384c-88.4 0-160 71.6-160 160s71.6 160 160 160 160-71.6 160-160-71.6-160-160-160zm0 256c-53 0-96-43-96-96s43-96 96-96 96 43 96 96-43 96-96 96z"}}]},name:"camera",theme:"outlined"},L=function(r,t){return a.createElement(j,N({},r,{ref:t,icon:R}))},M=a.forwardRef(L),O={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 289.1a362.49 362.49 0 00-79.9-115.7 370.83 370.83 0 00-118.2-77.8C610.7 76.6 562.1 67 512 67c-50.1 0-98.7 9.6-144.5 28.5-44.3 18.3-84 44.5-118.2 77.8A363.6 363.6 0 00169.4 289c-19.5 45-29.4 92.8-29.4 142 0 70.6 16.9 140.9 50.1 208.7 26.7 54.5 64 107.6 111 158.1 80.3 86.2 164.5 138.9 188.4 153a43.9 43.9 0 0022.4 6.1c7.8 0 15.5-2 22.4-6.1 23.9-14.1 108.1-66.8 188.4-153 47-50.4 84.3-103.6 111-158.1C867.1 572 884 501.8 884 431.1c0-49.2-9.9-97-29.4-142zM512 880.2c-65.9-41.9-300-207.8-300-449.1 0-77.9 31.1-151.1 87.6-206.3C356.3 169.5 431.7 139 512 139s155.7 30.5 212.4 85.9C780.9 280 812 353.2 812 431.1c0 241.3-234.1 407.2-300 449.1zm0-617.2c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm79.2 255.2A111.6 111.6 0 01512 551c-29.9 0-58-11.7-79.2-32.8A111.6 111.6 0 01400 439c0-29.9 11.7-58 32.8-79.2C454 338.6 482.1 327 512 327c29.9 0 58 11.6 79.2 32.8C612.4 381 624 409.1 624 439c0 29.9-11.6 58-32.8 79.2z"}}]},name:"environment",theme:"outlined"},$=function(r,t){return a.createElement(j,N({},r,{ref:t,icon:O}))},k=a.forwardRef($),U={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 110.8V792H136V270.8l-27.6-21.5 39.3-50.5 42.8 33.3h643.1l42.8-33.3 39.3 50.5-27.7 21.5zM833.6 232L512 482 190.4 232l-42.8-33.3-39.3 50.5 27.6 21.5 341.6 265.6a55.99 55.99 0 0068.7 0L888 270.8l27.6-21.5-39.3-50.5-42.7 33.2z"}}]},name:"mail",theme:"outlined"},H=function(r,t){return a.createElement(j,N({},r,{ref:t,icon:U}))},V=a.forwardRef(H),I={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M877.1 238.7L770.6 132.3c-13-13-30.4-20.3-48.8-20.3s-35.8 7.2-48.8 20.3L558.3 246.8c-13 13-20.3 30.5-20.3 48.9 0 18.5 7.2 35.8 20.3 48.9l89.6 89.7a405.46 405.46 0 01-86.4 127.3c-36.7 36.9-79.6 66-127.2 86.6l-89.6-89.7c-13-13-30.4-20.3-48.8-20.3a68.2 68.2 0 00-48.8 20.3L132.3 673c-13 13-20.3 30.5-20.3 48.9 0 18.5 7.2 35.8 20.3 48.9l106.4 106.4c22.2 22.2 52.8 34.9 84.2 34.9 6.5 0 12.8-.5 19.2-1.6 132.4-21.8 263.8-92.3 369.9-198.3C818 606 888.4 474.6 910.4 342.1c6.3-37.6-6.3-76.3-33.3-103.4zm-37.6 91.5c-19.5 117.9-82.9 235.5-178.4 331s-213 158.9-330.9 178.4c-14.8 2.5-30-2.5-40.8-13.2L184.9 721.9 295.7 611l119.8 120 .9.9 21.6-8a481.29 481.29 0 00285.7-285.8l8-21.6-120.8-120.7 110.8-110.9 104.5 104.5c10.8 10.8 15.8 26 13.3 40.8z"}}]},name:"phone",theme:"outlined"},F=function(r,t){return a.createElement(j,N({},r,{ref:t,icon:I}))},q=a.forwardRef(F),T={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"}}]},name:"save",theme:"outlined"},_=function(r,t){return a.createElement(j,N({},r,{ref:t,icon:T}))},G=a.forwardRef(_);function Q(){const{data:o,isLoading:r}=C(),t=o==null?void 0:o.admin,[w,{isLoading:i}]=D(),[f,h]=a.useState(""),[v,m]=a.useState(""),[x,c]=a.useState(""),[u,g]=a.useState("");a.useEffect(()=>{h((t==null?void 0:t.name)||(t==null?void 0:t.fullName)||""),m((t==null?void 0:t.email)||""),c((t==null?void 0:t.contact)||(t==null?void 0:t.contactNo)||""),g((t==null?void 0:t.address)||"")},[t==null?void 0:t.name,t==null?void 0:t.fullName,t==null?void 0:t.email,t==null?void 0:t.contact,t==null?void 0:t.contactNo,t==null?void 0:t.address]);const b=async l=>{var n;l.preventDefault();try{const s=new FormData;f&&s.append("name",f),x&&s.append("contact",x),u&&s.append("address",u),await w(s).unwrap(),await p.fire({icon:"success",title:"Profile updated",toast:!0,position:"top-end",showConfirmButton:!1,timer:1200,timerProgressBar:!0,background:"#111827",color:"#ffffff",iconColor:"#10B981"})}catch(s){const d=((n=s==null?void 0:s.data)==null?void 0:n.message)||(s==null?void 0:s.error)||"Failed to update profile";await p.fire({icon:"error",title:d,confirmButtonColor:"#0b7bb3"})}};return e.jsx("div",{className:"w-full max-w-2xl mx-auto",children:e.jsxs("div",{className:"bg-white px-4 sm:px-6 lg:px-8 py-6 rounded-lg shadow-sm",children:[e.jsx("h2",{className:"text-lg sm:text-xl lg:text-2xl text-[#0D0D0D] text-center font-bold mb-6",children:"Edit Your Profile"}),e.jsxs("form",{className:"space-y-6",onSubmit:b,children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm sm:text-base lg:text-lg text-[#0D0D0D] font-semibold",children:[e.jsx(z,{"aria-hidden":"true"}),e.jsx("span",{children:"User Name"})]}),e.jsx("input",{type:"text",name:"fullName",className:"w-full px-3 sm:px-4 py-3 border-2 border-[#6A6D76] rounded-lg outline-none focus:border-[#0b7bb3] focus:ring-2 focus:ring-[#0b7bb3]/20 transition-all duration-200 text-sm sm:text-base placeholder:text-sm sm:placeholder:text-base",placeholder:"Enter full name",value:f,onChange:l=>h(l.target.value),disabled:r||i,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm sm:text-base lg:text-lg text-[#0D0D0D] font-semibold",children:[e.jsx(V,{"aria-hidden":"true"}),e.jsx("span",{children:"Email"})]}),e.jsx("input",{type:"email",name:"email",className:"w-full px-3 sm:px-4 py-3 border-2 border-[#6A6D76] rounded-lg outline-none focus:border-[#0b7bb3] focus:ring-2 focus:ring-[#0b7bb3]/20 transition-all duration-200 text-sm sm:text-base placeholder:text-sm sm:placeholder:text-base",placeholder:"Enter email address",value:v,onChange:l=>m(l.target.value),disabled:!0,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm sm:text-base lg:text-lg text-[#0D0D0D] font-semibold",children:[e.jsx(q,{"aria-hidden":"true"}),e.jsx("span",{children:"Contact No"})]}),e.jsx("input",{type:"tel",name:"contactNo",className:"w-full px-3 sm:px-4 py-3 border-2 border-[#6A6D76] rounded-lg outline-none focus:border-[#0b7bb3] focus:ring-2 focus:ring-[#0b7bb3]/20 transition-all duration-200 text-sm sm:text-base placeholder:text-sm sm:placeholder:text-base",placeholder:"Enter contact number",value:x,onChange:l=>c(l.target.value),disabled:r||i,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm sm:text-base lg:text-lg text-[#0D0D0D] font-semibold",children:[e.jsx(k,{"aria-hidden":"true"}),e.jsx("span",{children:"Address"})]}),e.jsx("textarea",{name:"address",rows:"3",className:"w-full px-3 sm:px-4 py-3 border-2 border-[#6A6D76] rounded-lg outline-none focus:border-[#0b7bb3] focus:ring-2 focus:ring-[#0b7bb3]/20 transition-all duration-200 text-sm sm:text-base placeholder:text-sm sm:placeholder:text-base resize-none",placeholder:"Enter your address",value:u,onChange:l=>g(l.target.value),disabled:r||i,required:!0})]}),e.jsx("div",{className:"pt-4",children:e.jsxs("button",{type:"submit",className:"w-full bg-[#0b7bb3] text-white font-semibold py-3 px-4 rounded-lg text-sm shadow-sm inline-flex items-center justify-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed",disabled:r||i,children:[e.jsx(G,{"aria-hidden":"true"}),e.jsx("span",{children:i?"Saving...":"Save Changes"})]})})]})]})})}function Y(){const[o,r]=a.useState(!1),[t,w]=a.useState(!1),[i,f]=a.useState(!1),[h,v]=a.useState(""),[m,x]=a.useState(""),[c,u]=a.useState(""),[g,{isLoading:b}]=A(),l=async n=>{var s;if(n.preventDefault(),!h.trim()||!m.trim()||!c.trim()){await p.fire({icon:"error",title:"Missing fields",text:"Please fill all password fields.",confirmButtonColor:"#0b7bb3"});return}if(m!==c){await p.fire({icon:"error",title:"Password mismatch",text:"New password and confirmation do not match.",confirmButtonColor:"#0b7bb3"});return}try{await g({oldPassword:h,newPassword:m,confirmNewPassword:c}).unwrap(),await p.fire({icon:"success",title:"Password updated",toast:!0,position:"top-end",showConfirmButton:!1,timer:1200,timerProgressBar:!0,background:"#111827",color:"#ffffff",iconColor:"#10B981"}),v(""),x(""),u(""),r(!1),w(!1),f(!1)}catch(d){const S=((s=d==null?void 0:d.data)==null?void 0:s.message)||(d==null?void 0:d.error)||"Failed to update password";await p.fire({icon:"error",title:S,confirmButtonColor:"#0b7bb3"})}};return e.jsx("div",{className:"w-full max-w-2xl mx-auto",children:e.jsxs("div",{className:"bg-white px-4 sm:px-6 lg:px-8 py-6 rounded-lg shadow-sm",children:[e.jsx("h2",{className:"text-lg sm:text-xl lg:text-2xl text-[#0D0D0D] text-center font-bold mb-6",children:"Change Password"}),e.jsxs("form",{className:"space-y-6",onSubmit:l,children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"currentPassword",className:"block text-sm sm:text-base lg:text-lg text-[#0D0D0D] font-semibold",children:"Current Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:o?"text":"password",id:"currentPassword",name:"currentPassword",placeholder:"Enter current password",className:"w-full border-2 border-[#6A6D76] rounded-lg outline-none px-3 sm:px-4 py-3 pr-12 focus:border-[#0b7bb3] focus:ring-2 focus:ring-[#0b7bb3]/20 transition-all duration-200 text-sm sm:text-base placeholder:text-sm sm:placeholder:text-base",required:!0,value:h,onChange:n=>v(n.target.value)}),e.jsx("button",{type:"button",onClick:()=>r(!o),className:"absolute right-3 top-1/2 transform -translate-y-1/2 flex items-center text-[#6A6D76] hover:text-[#0b7bb3] transition-colors duration-200",children:o?e.jsx(P,{className:"text-[20px]"}):e.jsx(y,{className:"text-[20px]"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"newPassword",className:"block text-sm sm:text-base lg:text-lg text-[#0D0D0D] font-semibold",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:t?"text":"password",id:"newPassword",name:"newPassword",placeholder:"Enter new password",className:"w-full border-2 border-[#6A6D76] rounded-lg outline-none px-3 sm:px-4 py-3 pr-12 focus:border-[#0b7bb3] focus:ring-2 focus:ring-[#0b7bb3]/20 transition-all duration-200 text-sm sm:text-base placeholder:text-sm sm:placeholder:text-base",required:!0,value:m,onChange:n=>x(n.target.value)}),e.jsx("button",{type:"button",onClick:()=>w(!t),className:"absolute right-3 top-1/2 transform -translate-y-1/2 flex items-center text-[#6A6D76] hover:text-[#0b7bb3] transition-colors duration-200",children:t?e.jsx(P,{className:"text-[20px]"}):e.jsx(y,{className:"text-[20px]"})})]}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-500 mt-1",children:"Password must be at least 8 characters long"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm sm:text-base lg:text-lg text-[#0D0D0D] font-semibold",children:"Confirm New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:i?"text":"password",id:"confirmPassword",name:"confirmPassword",placeholder:"Confirm new password",className:"w-full border-2 border-[#6A6D76] rounded-lg outline-none px-3 sm:px-4 py-3 pr-12 focus:border-[#0b7bb3] focus:ring-2 focus:ring-[#0b7bb3]/20 transition-all duration-200 text-sm sm:text-base placeholder:text-sm sm:placeholder:text-base",required:!0,value:c,onChange:n=>u(n.target.value)}),e.jsx("button",{type:"button",onClick:()=>f(!i),className:"absolute right-3 top-1/2 transform -translate-y-1/2 flex items-center text-[#6A6D76] hover:text-[#0b7bb3] transition-colors duration-200",children:i?e.jsx(P,{className:"text-[20px]"}):e.jsx(y,{className:"text-[20px]"})})]})]}),e.jsx("div",{className:"pt-4",children:e.jsx("button",{type:"submit",disabled:b,className:`w-full bg-[#0b7bb3] text-white font-semibold py-3 px-4 rounded-lg transition-colors duration-200 text-sm ${b?"opacity-70 cursor-not-allowed":""}`,children:b?"Updating...":"Update Password"})})]})]})})}function se(){var x,c,u;const[o,r]=a.useState("editProfile"),{data:t,isLoading:w}=C(),[i,{isLoading:f}]=D(),[h,v]=a.useState(null),m=async g=>{var l,n;const b=(l=g.target.files)==null?void 0:l[0];if(b)try{const s=new FormData;s.append("profilePic",b),await i(s).unwrap(),v(URL.createObjectURL(b)),await p.fire({icon:"success",title:"Photo updated",toast:!0,position:"top-end",showConfirmButton:!1,timer:1200,timerProgressBar:!0,background:"#111827",color:"#ffffff",iconColor:"#10B981"})}catch(s){const d=((n=s==null?void 0:s.data)==null?void 0:n.message)||(s==null?void 0:s.error)||"Failed to update photo";await p.fire({icon:"error",title:d,confirmButtonColor:"#0b7bb3"})}finally{g.target.value=""}};return w?e.jsx(E,{}):e.jsx("div",{className:"min-h-screen",children:e.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 pb-6",children:[e.jsx("div",{className:"mb-6",children:e.jsx(B,{title:"Admin Profile"})}),e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("div",{className:"flex flex-col items-center text-center mb-8",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 sm:p-8 w-full max-w-md",children:[e.jsxs("div",{className:"relative inline-block mb-4",children:[e.jsx("div",{className:"w-24 h-24 sm:w-28 sm:h-28 md:w-32 md:h-32 bg-gray-200 rounded-full border-4 border-white shadow-xl overflow-hidden",children:e.jsx("img",{src:h||((x=t==null?void 0:t.admin)==null?void 0:x.profilePic),alt:"profile",className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"absolute bottom-1 right-1 sm:bottom-2 sm:right-2 bg-white p-2 rounded-full shadow-lg cursor-pointer hover:shadow-xl transition-shadow duration-200",children:[e.jsx("label",{htmlFor:"profilePicUpload",className:"cursor-pointer",children:e.jsx(M,{className:"text-[#0b7bb3] text-xs sm:text-sm","aria-hidden":"true"})}),e.jsx("input",{type:"file",id:"profilePicUpload",className:"hidden",accept:"image/*",onChange:m,disabled:f})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-gray-800",children:(c=t==null?void 0:t.admin)==null?void 0:c.name}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600 mt-1",children:(u=t==null?void 0:t.admin)==null?void 0:u.role})]})]})}),e.jsx("div",{className:"flex justify-center mb-8",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-2 flex gap-2",children:[e.jsx("button",{onClick:()=>r("editProfile"),className:`px-4 py-2 sm:px-6 sm:py-3 rounded-md text-sm sm:text-base font-medium transition-all duration-200 ${o==="editProfile"?"bg-[#0b7bb3] text-white shadow-md":"text-gray-600 hover:text-[#0b7bb3] hover:bg-gray-50"}`,children:"Edit Profile"}),e.jsx("button",{onClick:()=>r("changePassword"),className:`px-4 py-2 sm:px-6 sm:py-3 rounded-md text-sm sm:text-base font-medium transition-all duration-200 ${o==="changePassword"?"bg-[#0b7bb3] text-white shadow-md":"text-gray-600 hover:text-[#0b7bb3] hover:bg-gray-50"}`,children:"Change Password"})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:e.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[o==="editProfile"&&e.jsx(Q,{}),o==="changePassword"&&e.jsx(Y,{})]})})]})]})})}export{se as default};
