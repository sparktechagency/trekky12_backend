import{b as p,r as a,j as s,L as g}from"./index-CqDVZS1y.js";import{J as h}from"./jodit.min-BT6cXF0j.js";import{P as C}from"./PageHeading-Vr-Yfc9L.js";import{S as c}from"./sweetalert2.esm.all-DV3w3JmD.js";import"./AntdIcon-D531oBFH.js";const b=p.injectEndpoints({endpoints:n=>({getTermsAndConditions:n.query({query:()=>({url:"manage/get-terms-conditions",method:"GET"}),providesTags:["termsAndConditions"]}),createTerms:n.mutation({query:({description:i})=>({url:"manage/add-terms-conditions",method:"POST",body:{description:i}}),invalidatesTags:["termsAndConditions"]})})}),{useGetTermsAndConditionsQuery:x,useCreateTermsMutation:v}=b;function S(){const n=a.useRef(null),[i,d]=a.useState(""),{data:e,isLoading:m}=x(),[l,{isLoading:r}]=v();a.useEffect(()=>{var t;const o=((t=e==null?void 0:e.data)==null?void 0:t.description)||(e==null?void 0:e.description)||"";o&&d(o)},[e]);const u=async()=>{var o;try{await l({description:i}).unwrap(),await c.fire({icon:"success",title:"Terms & Conditions saved",toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,timerProgressBar:!0,background:"#111827",color:"#ffffff",iconColor:"#10B981"})}catch(t){const f=((o=t==null?void 0:t.data)==null?void 0:o.message)||(t==null?void 0:t.error)||"Failed to save";await c.fire({icon:"error",title:f,confirmButtonColor:"#0b7bb3"})}};return m?s.jsx(g,{}):s.jsxs("div",{className:"p-5 space-y-10 min-h-screen",children:[s.jsx(C,{title:"Terms And Condition"}),s.jsx("div",{className:" bg-white rounded shadow p-5 h-full",children:s.jsx(h,{ref:n,value:i,config:{readonly:!1,height:400},onChange:o=>d(o)})}),s.jsx("div",{className:"text-center py-5",children:s.jsx("button",{onClick:u,disabled:r,className:`bg-[#0b7bb3] text-white font-bold w-full py-2 rounded transition duration-200 ${r?"opacity-70 cursor-not-allowed":""}`,children:r?"Saving...":"Save changes"})})]})}export{S as default};
